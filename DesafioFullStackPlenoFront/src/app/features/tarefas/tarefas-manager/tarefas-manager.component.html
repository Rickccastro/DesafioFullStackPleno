<div class="min-h-screen bg-gray-900 p-6">
  <!-- Cabeçalho e Filtros -->
  <div class="mb-6">
    <h1 class="text-3xl font-bold text-white mb-4">Gerenciamento de Tarefas</h1>

    <form
      [formGroup]="form"
      (ngSubmit)="submit()"
      class="flex flex-col sm:flex-row gap-4 flex-wrap"
    >
      <input
        formControlName="titulo"
        placeholder="Título"
        class="flex-1 p-2 rounded-md bg-gray-800 text-white placeholder-gray-400 focus:outline-indigo-500"
      />
      <input
        formControlName="descricao"
        placeholder="Descrição"
        class="flex-1 p-2 rounded-md bg-gray-800 text-white placeholder-gray-400 focus:outline-indigo-500"
      />
      <select
        formControlName="status"
        class="flex-1 p-2 rounded-md bg-gray-800 text-white focus:outline-indigo-500"
      >
        <option *ngFor="let s of statusOptions" [value]="s">{{ s }}</option>
      </select>
      <select
        formControlName="usuarioId"
        class="flex-1 p-2 rounded-md bg-gray-800 text-white focus:outline-indigo-500"
      >
        <option *ngFor="let r of responsavelOptions()" [value]="r.id">
          {{ r.nome }}
        </option>
      </select>

      <select
        formControlName="usuarioNome"
        class="flex-1 p-2 rounded-md bg-gray-800 text-white focus:outline-indigo-500"
      >
              <option value="">Todos</option>
        <option *ngFor="let r of responsavelOptions()" [value]="r.nome">
          {{ r.nome }}
        </option>
      </select>

      <label class="flex items-center gap-2 text-white">
        <input
          type="checkbox"
          formControlName="ultimasCinco"
          class="accent-indigo-500"
        />
        Últimas 5 tarefas
      </label>

      <button
        type="submit"
        class="bg-indigo-500 hover:bg-indigo-400 text-white px-4 py-2 rounded-md"
      >
        {{ editingTask ? "Atualizar" : "Adicionar" }}
      </button>
      <button
        *ngIf="editingTask"
        type="button"
        (click)="cancelEdit()"
        class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-md"
      >
        Cancelar
      </button>
    </form>
  </div>

  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
  >
    <div
      *ngFor="let tarefa of paginatedTarefas()"
      class="bg-gray-800 p-4 rounded-lg shadow hover:shadow-lg transition-shadow"
    >
      <h2 class="text-lg font-semibold text-white mb-2">{{ tarefa.titulo }}</h2>
      <p class="text-gray-300 mb-2">{{ tarefa.id }}</p>
      <p class="text-gray-300 mb-2">{{ tarefa.descricao }}</p>
      <p class="text-gray-300 mb-4">{{ tarefa.status }}</p>
      <p class="text-gray-300 mb-4">{{ tarefa.dataCriacao }}</p>
      <div class="flex justify-between">
        <button
          (click)="edit(tarefa)"
          class="bg-green-500 hover:bg-green-400 text-white px-3 py-1 rounded-md text-sm"
        >
          Editar
        </button>
        <button
          (click)="deleteTarefa(tarefa.id)"
          class="bg-red-500 hover:bg-red-400 text-white px-3 py-1 rounded-md text-sm"
        >
          Excluir
        </button>
      </div>
    </div>
  </div>

  <!-- Paginação -->
  <div class="flex justify-center gap-2 mt-6">
    <button
      (click)="prevPage()"
      [disabled]="currentPage() === 1"
      class="px-3 py-1 bg-gray-700 text-white rounded"
    >
      Anterior
    </button>
    <span class="text-white px-2"
      >{{ currentPage() }} / {{ totalPages() }}</span
    >
    <button
      (click)="nextPage()"
      [disabled]="currentPage() === totalPages()"
      class="px-3 py-1 bg-gray-700 text-white rounded"
    >
      Próximo
    </button>
  </div>
</div>
